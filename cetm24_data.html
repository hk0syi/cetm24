<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Learn Data from "Run"</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: sans-serif;
      padding: 1rem;
      max-width: 900px;
      margin: auto;
      background: #f9fafb;
    }
    h1, h2 {
      color: #1e3a8a;
      text-align: center;
    }
    .step {
      background: white;
      border-radius: 8px;
      padding: 1rem;
      margin-bottom: 1rem;
      border: 1px solid #cbd5e1;
    }
    .data-box {
      background: #e0f2fe;
      padding: 1rem;
      border-radius: 6px;
      font-family: monospace;
      white-space: pre-wrap;
      color: #1e3a8a;
      margin-top: 0.5rem;
    }
    button {
      background: #3b82f6;
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 4px;
      cursor: pointer;
      margin-top: 1rem;
      display: inline-block;
    }
    button:hover {
      background: #2563eb;
    }
    canvas {
      max-width: 100%;
      margin-top: 1rem;
    }
    .hidden {
      display: none;
    }
  </style>
</head>
<body>

  <h1>📘 Learn Data from the Word "Run"</h1>

  <!-- Step 0 -->
  <div class="step" id="step1">
    <h2>Step 0: What is "Run"?</h2>
    <p><strong>"Run"</strong> is a <em>verb</em>. In grammar, it's an <strong>action</strong>.</p>
    <p>In data, this action becomes an <strong>event</strong>.</p>
    <div class="data-box">event: "run"</div>
    <button onclick="nextStep(2)">Next ➡️</button>
  </div>

  <!-- Step 1 -->
  <div class="step hidden" id="step2">
    <h2>Step 1: Who is Running?</h2>
    <p>Grammatically, we need a <strong>subject</strong>.</p>
    <p>In data, it’s the <strong>source</strong> — a person, sensor, or user.</p>
    <div class="data-box">event: "run"<br>user: "Tom"</div>
    <button onclick="nextStep(3)">Next ➡️</button>
  </div>

  <!-- Step 2 -->
  <div class="step hidden" id="step3">
    <h2>Step 2: When and Where?</h2>
    <p>Adding <strong>context</strong> like time and location makes data more useful.</p>
    <div class="data-box">
event: "run"<br>
user: "Tom"<br>
time: "6:00 AM"<br>
location: "Park"
    </div>
    <button onclick="nextStep(4)">Next ➡️</button>
  </div>

  <!-- Step 3 -->
  <div class="step hidden" id="step4">
    <h2>Step 3: Why?</h2>
    <p>The <strong>purpose</strong> gives deeper meaning to the data.</p>
    <div class="data-box">
event: "run"<br>
user: "Tom"<br>
time: "6:00 AM"<br>
location: "Park"<br>
purpose: "exercise"
    </div>
    <button onclick="nextStep(5)">Next ➡️</button>
  </div>

  <!-- Step 4 -->
  <div class="step hidden" id="step5">
    <h2>Step 4: Add Measurable Values "How (Much / Long / Far)"</h2>
    <p>We now include <strong>duration</strong> and <strong>distance</strong>.</p>
    <div class="data-box">
event: "run"<br>
user: "Tom"<br>
time: "6:00 AM"<br>
location: "Park"<br>
purpose: "exercise"<br>
duration: 30<br>
distance: 5.2
    </div>
    <button onclick="nextStep(6)">Next ➡️</button>
  </div>

  <!-- Step 5 -->
  <div class="step hidden" id="step6">
    <h2>Step 5: Sample Data</h2>
    <div class="data-box" id="sampleData">Loading...</div>
    <button onclick="nextStep(7)">Next ➡️</button>
  </div>

  <!-- Step 6 -->
  <div class="step hidden" id="step7">
    <h2>Step 6: Analyze the Data</h2>
    <button onclick="analyze('user')">👤 Most Active Users</button>
    <button onclick="analyze('location')">📍 Most Popular Locations</button>
    <button onclick="analyze('time')">⏰ Most Common Times</button>
    <button onclick="analyze('purpose')">🎯 Common Purposes</button>
    <button onclick="analyze('duration')">⏱️ Total & Average Duration</button>
    <button onclick="analyze('distance')">📏 Total & Average Distance</button>
    <div id="analysisResult" class="data-box"></div>
    <button onclick="nextStep(8)">Next ➡️</button>
  </div>

  <!-- ✅ Step 8: Classify Fields -->
  <div class="step hidden" id="step8">
    <h2>Step 8: Classify Each Field with Explanation</h2>
    <div class="data-box">
<strong>user → Nominal</strong><br>
It's just a name (e.g. "Tom", "Anna"). A label with no numeric meaning.<br><br>

<strong>event → Nominal</strong><br>
The verb ("run") is a label — a type of action, not numeric.<br><br>

<strong>time → Interval</strong><br>
Time has meaningful order (6 AM &lt; 7 AM), but 0 AM is not "no time". No true zero.<br><br>

<strong>location → Nominal</strong><br>
Place names like "Park", "Gym" are categories — not ordered.<br><br>

<strong>purpose → Nominal</strong><br>
Reasons like "exercise", "training" are types of motivation — just categories.<br><br>

<strong>duration → Ratio</strong><br>
Measured in minutes. Has a true zero (0 = no time). Can be averaged and compared.<br><br>

<strong>distance → Ratio</strong><br>
Measured in kilometers. Has a true zero (0 = no movement). Supports all math.
    </div>
    <button onclick="nextStep(9)">Next ➡️</button>
  </div>

  <!-- ✅ Step 9: Compare Users with Chart -->
  <div class="step hidden" id="step9">
    <h2>Step 9: Compare Users</h2>
    <canvas id="compareChart" height="200"></canvas>
    <div class="data-box" id="compareSummary">Click the button to compare users.</div>
    <button onclick="compareUsers()">🔍 Compare Tom & Anna</button>
    <button onclick="nextStep(10)">Next ➡️</button>
  </div>

  <!-- Step 10 -->
  <div class="step hidden" id="step10">
    <h2>Step 10: Detect Outliers</h2>
    <p>Outliers = Runs &gt; 50 min or &gt; 8 km</p>
    <button onclick="drawOutliers()">📊 Show Outlier Chart</button>
    <canvas id="outlierChart"></canvas>
    <div class="data-box" id="outliers">Click above to show outliers.</div>
    <button onclick="nextStep(11)">Next ➡️</button>
  </div>

  <!-- Step 11 -->
  <div class="step hidden" id="step11">
    <h2>Step 11: Visual Summary</h2>
    <div class="data-box" id="summary">Click to generate summary.</div>
    <button onclick="summarize()">📋 Generate</button>
    <button onclick="nextStep(12)">Next ➡️</button>
  </div>

  <!-- Step 12 -->
  <div class="step hidden" id="step12">
    <h2>Step 12: Data to Decision</h2>
    <ul>
      <li>✅ Most runs are in the <strong>morning</strong></li>
      <li>📍 Popular places: <strong>Park, Gym</strong></li>
      <li>📈 Use data to plan your run efficiently!</li>
    </ul>
    <button onclick="restart()">🔁 Restart</button>
  </div>

  <script>
    const data = [
      { user: "Tom", event: "run", time: "6:00 AM", location: "Park", purpose: "exercise", duration: 30, distance: 5.2 },
      { user: "Anna", event: "run", time: "7:00 AM", location: "Gym", purpose: "training", duration: 40, distance: 6.0 },
      { user: "Tom", event: "run", time: "6:30 AM", location: "Park", purpose: "exercise", duration: 25, distance: 4.5 },
      { user: "Liam", event: "run", time: "8:00 AM", location: "Beach", purpose: "relaxation", duration: 20, distance: 3.0 },
      { user: "Anna", event: "run", time: "6:00 AM", location: "Gym", purpose: "training", duration: 50, distance: 7.1 },
      { user: "Sara", event: "run", time: "5:30 AM", location: "Park", purpose: "exercise", duration: 35, distance: 5.8 },
      { user: "Tom", event: "run", time: "7:00 AM", location: "Hill", purpose: "competition", duration: 45, distance: 8.0 },
      { user: "Liam", event: "run", time: "6:00 AM", location: "Beach", purpose: "relaxation", duration: 22, distance: 3.2 },
      { user: "Sara", event: "run", time: "6:00 AM", location: "Park", purpose: "exercise", duration: 38, distance: 6.3 },
      { user: "Anna", event: "run", time: "7:30 AM", location: "Gym", purpose: "training", duration: 60, distance: 1.5 }
    ];

    function nextStep(step) {
      document.querySelectorAll('.step').forEach(s => s.classList.add('hidden'));
      document.getElementById(`step${step}`).classList.remove('hidden');
      if (step === 6) {
        document.getElementById('sampleData').textContent = JSON.stringify(data, null, 2);
      }
    }

    function analyze(key) {
      const result = {};
      let total = 0;
      let isNumeric = typeof data[0][key] === 'number';

      if (isNumeric) {
        data.forEach(d => total += d[key]);
        const avg = total / data.length;
        const unit = key === 'duration' ? 'minutes' : 'km';
        document.getElementById('analysisResult').textContent =
          `Total: ${total.toFixed(2)} ${unit}\nAverage: ${avg.toFixed(2)} ${unit}`;
      } else {
        data.forEach(d => result[d[key]] = (result[d[key]] || 0) + 1);
        const sorted = Object.entries(result).sort((a, b) => b[1] - a[1]);
        document.getElementById('analysisResult').textContent = sorted.map(([k, v]) => `${k}: ${v}`).join('\n');
      }
    }

    function compareUsers() {
      const result = {
        Tom: { duration: 0, distance: 0 },
        Anna: { duration: 0, distance: 0 }
      };

      data.forEach(d => {
        if (d.user === "Tom" || d.user === "Anna") {
          result[d.user].duration += d.duration;
          result[d.user].distance += d.distance;
        }
      });

      const longerRunner = result.Tom.duration > result.Anna.duration ? "Tom" : "Anna";
      const fartherRunner = result.Tom.distance > result.Anna.distance ? "Tom" : "Anna";

      const ctx = document.getElementById("compareChart").getContext("2d");
      if (window.compareChart instanceof Chart) {
        window.compareChart.destroy();
      }

      window.compareChart = new Chart(ctx, {
        type: "bar",
        data: {
          labels: ["Tom", "Anna"],
          datasets: [
            {
              label: "Duration (min)",
              data: [result.Tom.duration, result.Anna.duration],
              backgroundColor: "rgba(59,130,246,0.7)"
            },
            {
              label: "Distance (km)",
              data: [result.Tom.distance, result.Anna.distance],
              backgroundColor: "rgba(16,185,129,0.7)"
            }
          ]
        },
        options: {
          scales: { y: { beginAtZero: true } },
          plugins: {
            title: { display: true, text: "Compare Tom & Anna" }
          }
        }
      });

      document.getElementById("compareSummary").textContent = `
🔢 Totals:
Tom → ${result.Tom.duration} min, ${result.Tom.distance.toFixed(1)} km
Anna → ${result.Anna.duration} min, ${result.Anna.distance.toFixed(1)} km

✅ Conclusion:
• ${longerRunner} ran longer
• ${fartherRunner} ran farther
`.trim();
    }

    function drawOutliers() {
      const ctx = document.getElementById('outlierChart').getContext('2d');
      if (window.outlierChart instanceof Chart) {
        window.outlierChart.destroy();
      }

      const labels = data.map((d, i) => `${d.user} #${i + 1}`);
      const durations = data.map(d => d.duration);
      const distances = data.map(d => d.distance);
      const colors = data.map(d =>
        d.duration > 50 || d.distance > 8 ? 'rgba(239,68,68,0.8)' : 'rgba(59,130,246,0.7)'
      );

      window.outlierChart = new Chart(ctx, {
        type: 'bar',
        data: {
          labels,
          datasets: [
            { label: 'Distance (km)', data: distances, backgroundColor: colors },
            { label: 'Duration (min)', data: durations, backgroundColor: colors.map(c => c.replace('0.7', '0.4')) }
          ]
        },
        options: {
          scales: { y: { beginAtZero: true } },
          plugins: {
            title: { display: true, text: 'Outliers: Run Duration & Distance' },
            legend: { position: 'top' }
          }
        }
      });

      const outliers = data.filter(d => d.duration > 50 || d.distance > 8);
      document.getElementById('outliers').textContent =
        outliers.length === 0
          ? "✅ No outliers found."
          : outliers.map(d => `${d.user} → ${d.duration} min, ${d.distance} km`).join('\n');
    }

    function summarize() {
      const timeFreq = {};
      const locFreq = {};
      data.forEach(d => {
        timeFreq[d.time] = (timeFreq[d.time] || 0) + 1;
        locFreq[d.location] = (locFreq[d.location] || 0) + 1;
      });
      const topTime = Object.entries(timeFreq).sort((a, b) => b[1] - a[1])[0][0];
      const topLoc = Object.entries(locFreq).sort((a, b) => b[1] - a[1]).slice(0, 2).map(x => x[0]);
      document.getElementById('summary').textContent =
        `⏰ Most common time: ${topTime}\n📍 Popular locations: ${topLoc.join(', ')}`;
    }

    function restart() {
      nextStep(1);
    }

    nextStep(1);
  </script>

</body>
</html>