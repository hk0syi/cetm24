<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Community Detection in Complex Networks</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.2);
            backdrop-filter: blur(10px);
        }

        h1 {
            color: #2d3748;
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            color: #718096;
            font-size: 1.2em;
        }

        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.2);
            backdrop-filter: blur(10px);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 25px 70px rgba(0,0,0,0.25);
        }

        .card h2 {
            color: #2d3748;
            margin-bottom: 20px;
            font-size: 1.8em;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        .network-container {
            background: #f7fafc;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            min-height: 400px;
            position: relative;
            overflow: hidden;
        }

        #network-viz, #overlapping-viz {
            width: 100%;
            height: 400px;
            background: white;
            border-radius: 10px;
            box-shadow: inset 0 2px 10px rgba(0,0,0,0.1);
        }

        .control-panel {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
        }

        button {
            background: white;
            color: #667eea;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 5px;
        }

        button:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        button:active {
            transform: scale(0.95);
        }

        .concept-box {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
        }

        .application-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .app-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 3px solid transparent;
        }

        .app-card:hover {
            border-color: #667eea;
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.3);
        }

        .app-icon {
            font-size: 3em;
            margin-bottom: 10px;
        }

        .app-card h3 {
            color: #2d3748;
            margin-bottom: 10px;
        }

        .app-card p {
            color: #718096;
            font-size: 0.9em;
        }

        .legend {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 20px;
            margin: 20px 0;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .legend-circle {
            width: 20px;
            height: 20px;
            border-radius: 50%;
        }

        .info-box {
            background: #edf2f7;
            border-left: 4px solid #667eea;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }

        .info-box h3 {
            color: #2d3748;
            margin-bottom: 10px;
        }

        .info-box ul {
            margin-left: 20px;
            color: #4a5568;
        }

        .info-box li {
            margin: 8px 0;
        }

        .cambridge-section {
            background: linear-gradient(135deg, #ee0979 0%, #ff6a00 100%);
            color: white;
            padding: 30px;
            border-radius: 20px;
            margin: 30px 0;
        }

        .cambridge-section h3 {
            font-size: 1.5em;
            margin-bottom: 15px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .stat-box {
            background: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
        }

        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.6s ease;
        }

        .tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.9em;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="fade-in">
            <h1>Community Detection in Complex Networks</h1>
            <p class="subtitle">Understanding Network Communities & Social Structures</p>
        </header>

        <div class="content-grid">
            <div class="card fade-in">
                <h2>üåê What is Community Detection?</h2>
                <div class="concept-box">
                    <p><strong>Key Insight:</strong> Nodes in networks naturally form groups or communities based on their connections. Unlike traditional clustering, nodes can belong to <em>multiple communities</em> simultaneously!</p>
                </div>
                
                <div class="info-box">
                    <h3>Core Concepts:</h3>
                    <ul>
                        <li><strong>Communities:</strong> Groups of densely connected nodes</li>
                        <li><strong>Overlapping Membership:</strong> Nodes can participate in multiple groups</li>
                        <li><strong>Network Structure:</strong> Reveals hidden patterns and relationships</li>
                        <li><strong>Real-world Applications:</strong> Social networks, biological systems, information flow</li>
                    </ul>
                </div>

                <div class="network-container">
                    <div id="network-viz"></div>
                    <div class="legend">
                        <div class="legend-item">
                            <div class="legend-circle" style="background: #FF6B6B;"></div>
                            <span>Community A</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-circle" style="background: #4ECDC4;"></div>
                            <span>Community B</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-circle" style="background: #45B7D1;"></div>
                            <span>Community C</span>
                        </div>
                    </div>
                </div>

                <div class="control-panel">
                    <h3>Interactive Controls</h3>
                    <button onclick="detectCommunities()">üîç Detect Communities</button>
                    <button onclick="showOverlapping()">üîó Show Overlapping Nodes</button>
                    <button onclick="resetNetwork()">üîÑ Reset Network</button>
                </div>
            </div>

            <div class="card fade-in">
                <h2>üî¨ Real-World Applications</h2>
                
                <div class="application-grid">
                    <div class="app-card" onclick="showApplication('social')">
                        <div class="app-icon">üë•</div>
                        <h3>Social Networks</h3>
                        <p>Friend groups, interest communities, professional networks</p>
                    </div>
                    
                    <div class="app-card" onclick="showApplication('biology')">
                        <div class="app-icon">üß¨</div>
                        <h3>Protein Interactions</h3>
                        <p>Disease understanding, drug discovery, biological pathways</p>
                    </div>
                    
                    <div class="app-card" onclick="showApplication('info')">
                        <div class="app-icon">üìä</div>
                        <h3>Information Flow</h3>
                        <p>News propagation, viral content, influence patterns</p>
                    </div>
                    
                    <div class="app-card" onclick="showApplication('business')">
                        <div class="app-icon">üíº</div>
                        <h3>Business Networks</h3>
                        <p>Market segments, customer groups, supply chains</p>
                    </div>
                </div>

                <div id="application-details" class="info-box" style="display: none;">
                    <h3 id="app-title"></h3>
                    <p id="app-description"></p>
                </div>
            </div>
        </div>

        <div class="card fade-in">
            <h2>üåü Overlapping Communities Visualization</h2>
            <p style="margin-bottom: 20px;">Real networks rarely have strict boundaries. Nodes often bridge multiple communities, creating rich, interconnected structures.</p>
            
            <div class="network-container">
                <div id="overlapping-viz"></div>
            </div>
            
            <div class="info-box">
                <h3>Why Overlapping Communities Matter:</h3>
                <ul>
                    <li><strong>Bridge Nodes:</strong> Connect different communities, crucial for information flow</li>
                    <li><strong>Multiple Roles:</strong> People belong to family, work, hobby communities simultaneously</li>
                    <li><strong>Network Resilience:</strong> Overlapping structure provides redundancy and stability</li>
                    <li><strong>Influence Pathways:</strong> Understanding how influence spreads across community boundaries</li>
                </ul>
            </div>
        </div>

        <div class="cambridge-section fade-in">
            <h3>üì± The Cambridge Analytica Case Study</h3>
            <p style="margin-bottom: 20px;">A powerful example of how community detection and network analysis can be used (and misused) in social media:</p>
            
            <div class="stats-grid">
                <div class="stat-box">
                    <div class="stat-number">87M</div>
                    <div class="stat-label">Facebook Profiles</div>
                </div>
                <div class="stat-box">
                    <div class="stat-number">5,000+</div>
                    <div class="stat-label">Data Points/Person</div>
                </div>
                <div class="stat-box">
                    <div class="stat-number">2016</div>
                    <div class="stat-label">Election Impact</div>
                </div>
                <div class="stat-box">
                    <div class="stat-number">Network</div>
                    <div class="stat-label">Analysis Used</div>
                </div>
            </div>
            
            <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 10px; margin-top: 20px;">
                <h4>How Network Analysis Was Used:</h4>
                <ul style="margin-left: 20px; margin-top: 10px;">
                    <li>Community detection identified like-minded groups</li>
                    <li>Network connections revealed influence patterns</li>
                    <li>Overlapping communities showed cross-cutting interests</li>
                    <li>Targeted messaging exploited community structures</li>
                    <li>Data integration + network patterns = powerful profiling</li>
                </ul>
            </div>
        </div>

        <div class="card fade-in">
            <h2>üìö Key Takeaways</h2>
            <div class="info-box">
                <ul>
                    <li>Community detection reveals hidden structure in complex networks</li>
                    <li>Unlike traditional clustering, nodes can belong to multiple communities</li>
                    <li>Applications span from social media to biological research</li>
                    <li>Understanding network communities helps predict behavior and information flow</li>
                    <li>Ethical considerations are crucial when analyzing social networks</li>
                    <li>Modern algorithms can detect communities in networks with millions of nodes</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="tooltip" id="tooltip"></div>

    <script>
        // Network visualization data
        let nodes = [];
        let links = [];
        let simulation;

        // Initialize the network
        function initNetwork() {
            // Create sample network data
            nodes = [
                // Community A (Social group)
                {id: 1, group: 1, name: "Alice", communities: [1]},
                {id: 2, group: 1, name: "Bob", communities: [1]},
                {id: 3, group: 1, name: "Carol", communities: [1]},
                {id: 4, group: 1, name: "David", communities: [1, 2]}, // Bridge node
                
                // Community B (Work group)
                {id: 5, group: 2, name: "Eve", communities: [2]},
                {id: 6, group: 2, name: "Frank", communities: [2]},
                {id: 7, group: 2, name: "Grace", communities: [2, 3]}, // Bridge node
                {id: 8, group: 2, name: "Henry", communities: [2]},
                
                // Community C (Hobby group)
                {id: 9, group: 3, name: "Iris", communities: [3]},
                {id: 10, group: 3, name: "Jack", communities: [3]},
                {id: 11, group: 3, name: "Kate", communities: [3]},
                {id: 12, group: 3, name: "Leo", communities: [1, 3]}, // Bridge node
            ];

            links = [
                // Community A connections
                {source: 1, target: 2, value: 3},
                {source: 1, target: 3, value: 3},
                {source: 2, target: 3, value: 3},
                {source: 2, target: 4, value: 2},
                {source: 3, target: 4, value: 2},
                {source: 1, target: 12, value: 1}, // Cross-community
                
                // Community B connections
                {source: 5, target: 6, value: 3},
                {source: 5, target: 7, value: 3},
                {source: 5, target: 8, value: 3},
                {source: 6, target: 7, value: 3},
                {source: 6, target: 8, value: 3},
                {source: 7, target: 8, value: 3},
                {source: 4, target: 5, value: 1}, // Cross-community
                
                // Community C connections
                {source: 9, target: 10, value: 3},
                {source: 9, target: 11, value: 3},
                {source: 10, target: 11, value: 3},
                {source: 10, target: 12, value: 3},
                {source: 11, target: 12, value: 3},
                {source: 7, target: 9, value: 1}, // Cross-community
                {source: 12, target: 3, value: 1}, // Cross-community
            ];

            drawNetwork();
        }

        function drawNetwork() {
            const width = document.getElementById('network-viz').clientWidth;
            const height = 400;

            // Clear previous visualization
            d3.select("#network-viz").selectAll("*").remove();

            const svg = d3.select("#network-viz")
                .append("svg")
                .attr("width", width)
                .attr("height", height);

            // Create force simulation
            simulation = d3.forceSimulation(nodes)
                .force("link", d3.forceLink(links).id(d => d.id).distance(60))
                .force("charge", d3.forceManyBody().strength(-300))
                .force("center", d3.forceCenter(width / 2, height / 2))
                .force("collision", d3.forceCollide().radius(30));

            // Color scale
            const color = d3.scaleOrdinal()
                .domain([1, 2, 3])
                .range(["#FF6B6B", "#4ECDC4", "#45B7D1"]);

            // Draw links
            const link = svg.append("g")
                .selectAll("line")
                .data(links)
                .enter().append("line")
                .attr("stroke", "#999")
                .attr("stroke-opacity", 0.6)
                .attr("stroke-width", d => Math.sqrt(d.value));

            // Draw nodes
            const node = svg.append("g")
                .selectAll("circle")
                .data(nodes)
                .enter().append("circle")
                .attr("r", 15)
                .attr("fill", d => color(d.group))
                .attr("stroke", "#fff")
                .attr("stroke-width", 2)
                .call(drag(simulation));

            // Add labels
            const label = svg.append("g")
                .selectAll("text")
                .data(nodes)
                .enter().append("text")
                .text(d => d.name)
                .style("font-size", "12px")
                .style("fill", "#333")
                .attr("text-anchor", "middle")
                .attr("dy", -20);

            // Add hover effects
            node.on("mouseover", function(event, d) {
                d3.select(this)
                    .transition()
                    .duration(200)
                    .attr("r", 20);
                
                showTooltip(event, d);
            })
            .on("mouseout", function() {
                d3.select(this)
                    .transition()
                    .duration(200)
                    .attr("r", 15);
                
                hideTooltip();
            });

            // Update positions on simulation tick
            simulation.on("tick", () => {
                link
                    .attr("x1", d => d.source.x)
                    .attr("y1", d => d.source.y)
                    .attr("x2", d => d.target.x)
                    .attr("y2", d => d.target.y);

                node
                    .attr("cx", d => d.x)
                    .attr("cy", d => d.y);

                label
                    .attr("x", d => d.x)
                    .attr("y", d => d.y);
            });
        }

        // Drag functionality
        function drag(simulation) {
            function dragstarted(event) {
                if (!event.active) simulation.alphaTarget(0.3).restart();
                event.subject.fx = event.subject.x;
                event.subject.fy = event.subject.y;
            }

            function dragged(event) {
                event.subject.fx = event.x;
                event.subject.fy = event.y;
            }

            function dragended(event) {
                if (!event.active) simulation.alphaTarget(0);
                event.subject.fx = null;
                event.subject.fy = null;
            }

            return d3.drag()
                .on("start", dragstarted)
                .on("drag", dragged)
                .on("end", dragended);
        }

        // Interactive functions
        function detectCommunities() {
            const svg = d3.select("#network-viz svg");
            
            // Animate community detection
            svg.selectAll("circle")
                .transition()
                .duration(1000)
                .attr("r", d => d.communities.length > 1 ? 25 : 15)
                .attr("stroke-width", d => d.communities.length > 1 ? 4 : 2);
        }

        function showOverlapping() {
            const svg = d3.select("#network-viz svg");
            
            // Highlight overlapping nodes
            svg.selectAll("circle")
                .transition()
                .duration(500)
                .attr("fill", d => d.communities.length > 1 ? "#FFD700" : d3.scaleOrdinal().domain([1,2,3]).range(["#FF6B6B", "#4ECDC4", "#45B7D1"])(d.group))
                .attr("r", d => d.communities.length > 1 ? 25 : 15);
        }

        function resetNetwork() {
            drawNetwork();
        }

        // Tooltip functions
        function showTooltip(event, d) {
            const tooltip = document.getElementById('tooltip');
            const communities = d.communities.map(c => `Community ${String.fromCharCode(64 + c)}`).join(", ");
            tooltip.innerHTML = `<strong>${d.name}</strong><br>Member of: ${communities}`;
            tooltip.style.left = (event.pageX + 10) + 'px';
            tooltip.style.top = (event.pageY - 25) + 'px';
            tooltip.style.opacity = 1;
        }

        function hideTooltip() {
            const tooltip = document.getElementById('tooltip');
            tooltip.style.opacity = 0;
        }

        // Application details
        function showApplication(type) {
            const details = document.getElementById('application-details');
            const title = document.getElementById('app-title');
            const description = document.getElementById('app-description');
            
            const applications = {
                social: {
                    title: "Social Network Analysis",
                    description: "Community detection in social networks reveals friend groups, interest communities, and influence patterns. It helps identify key influencers, predict information spread, and understand social dynamics. Applications include targeted marketing, recommendation systems, and understanding how ideas and behaviors spread through populations."
                },
                biology: {
                    title: "Biological Network Analysis",
                    description: "In protein interaction networks, communities represent functional modules or pathways. Detecting these communities helps researchers understand disease mechanisms, identify drug targets, and predict protein functions. Overlapping communities are especially important as proteins often participate in multiple biological processes."
                },
                info: {
                    title: "Information Flow Analysis",
                    description: "Understanding how information flows through network communities helps predict viral content, identify misinformation sources, and optimize content distribution. News organizations and social media platforms use these techniques to understand how stories spread and which communities drive engagement."
                },
                business: {
                    title: "Business Network Analysis",
                    description: "Companies use community detection to identify market segments, optimize supply chains, and understand customer relationships. It helps in detecting fraud patterns, improving recommendation systems, and identifying business opportunities through network effects."
                }
            };
            
            const app = applications[type];
            title.textContent = app.title;
            description.textContent = app.description;
            details.style.display = 'block';
            
            // Smooth scroll to details
            details.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Draw overlapping communities visualization
        function drawOverlappingViz() {
            const width = document.getElementById('overlapping-viz').clientWidth;
            const height = 400;

            const svg = d3.select("#overlapping-viz")
                .append("svg")
                .attr("width", width)
                .attr("height", height);

            // Create Venn diagram-like visualization
            const g = svg.append("g")
                .attr("transform", `translate(${width/2}, ${height/2})`);

            // Community circles
            const communities = [
                { id: "A", x: -60, y: -40, color: "#FF6B6B", opacity: 0.3 },
                { id: "B", x: 60, y: -40, color: "#4ECDC4", opacity: 0.3 },
                { id: "C", x: 0, y: 50, color: "#45B7D1", opacity: 0.3 }
            ];

            // Draw community circles
            communities.forEach(comm => {
                g.append("circle")
                    .attr("cx", comm.x)
                    .attr("cy", comm.y)
                    .attr("r", 100)
                    .attr("fill", comm.color)
                    .attr("opacity", comm.opacity)
                    .attr("stroke", comm.color)
                    .attr("stroke-width", 2);
                
                g.append("text")
                    .attr("x", comm.x)
                    .attr("y", comm.y - 70)
                    .attr("text-anchor", "middle")
                    .style("font-size", "16px")
                    .style("font-weight", "bold")
                    .style("fill", comm.color)
                    .text(`Community ${comm.id}`);
            });

            // Add sample nodes
            const sampleNodes = [
                { x: -60, y: -40, label: "A only" },
                { x: 60, y: -40, label: "B only" },
                { x: 0, y: 50, label: "C only" },
                { x: 0, y: -20, label: "A+B" },
                { x: -30, y: 20, label: "A+C" },
                { x: 30, y: 20, label: "B+C" },
                { x: 0, y: 10, label: "A+B+C" }
            ];

            sampleNodes.forEach(node => {
                g.append("circle")
                    .attr("cx", node.x)
                    .attr("cy", node.y)
                    .attr("r", 8)
                    .attr("fill", "#333")
                    .attr("stroke", "#fff")
                    .attr("stroke-width", 2)
                    .on("mouseover", function() {
                        d3.select(this)
                            .transition()
                            .duration(200)
                            .attr("r", 12);
                    })
                    .on("mouseout", function() {
                        d3.select(this)
                            .transition()
                            .duration(200)
                            .attr("r", 8);
                    });
            });
        }

        // Initialize on page load
        window.onload = function() {
            initNetwork();
            drawOverlappingViz();
        };

        // Handle window resize
        window.onresize = function() {
            initNetwork();
            d3.select("#overlapping-viz").selectAll("*").remove();
            drawOverlappingViz();
        };
    </script>
</body>
</html>