<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>üéØ Advanced Clustering Analysis: Retail Customer-Product Matrix</title>
<style>
  :root{
    --primary: #2563eb;
    --secondary: #7c3aed;
    --success: #059669;
    --warning: #d97706;
    --danger: #dc2626;
    --info: #0891b2;
    --dark: #1f2937;
    --light: #f8fafc;
    --border: #e2e8f0;
    --shadow: 0 10px 30px rgba(0,0,0,0.1);
    --gradient: linear-gradient(135deg, var(--primary), var(--secondary));
  }
  * { box-sizing: border-box; }
  body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    background: var(--gradient);
    min-height: 100vh;
    margin: 0;
    padding: 20px;
    color: var(--dark);
    line-height: 1.6;
  }
  .container {
    max-width: 1200px;
    margin: 0 auto;
    background: white;
    border-radius: 20px;
    box-shadow: var(--shadow);
    overflow: hidden;
  }
  .header {
    background: var(--gradient);
    color: white;
    padding: 30px;
    text-align: center;
  }
  .header h1 { margin: 0 0 10px 0; font-size: 2.2rem; font-weight: 700; }
  .header p { margin: 0; font-size: 1.1rem; opacity: 0.9; }
  .main-content { padding: 30px; }
  .context-section {
    background: var(--light); border-radius: 12px; padding: 20px; margin-bottom: 25px;
  }
  .context-section h3 { margin: 0 0 12px 0; color: var(--primary); font-size: 1.3rem; }
  .data-explanation {
    display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 25px;
  }
  .explanation-card {
    background: white; border: 2px solid var(--border); border-radius: 12px; padding: 18px;
  }
  .explanation-card h4 { margin: 0 0 10px 0; color: var(--secondary); font-size: 1.1rem; }
  .controls-section {
    background: white; border: 2px solid var(--border); border-radius: 12px; padding: 20px; margin-bottom: 25px;
  }
  .controls-title { font-size: 1.4rem; font-weight: 600; margin: 0 0 15px 0; color: var(--dark); }
  .mode-buttons {
    display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px; margin-bottom: 20px;
  }
  .mode-btn {
    padding: 12px 20px; border: 2px solid var(--border); border-radius: 8px; background: white;
    color: var(--dark); font-weight: 600; cursor: pointer; transition: all 0.3s ease; text-align: center;
  }
  .mode-btn:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
  .mode-btn.active { color: white; box-shadow: 0 5px 20px rgba(0,0,0,0.2); }
  .mode-btn[data-mode="row"].active { background: var(--danger); border-color: var(--danger); }
  .mode-btn[data-mode="col"].active { background: var(--info); border-color: var(--info); }
  .mode-btn[data-mode="bicluster"].active { background: var(--success); border-color: var(--success); }
  .mode-btn[data-mode="overlap"].active { background: var(--secondary); border-color: var(--secondary); }
  .reset-btn {
    background: var(--warning); color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-weight: 600;
  }

  .visualization-section {
    display: grid; grid-template-columns: auto 1fr; gap: 30px; align-items: start; margin-bottom: 25px;
  }
  .matrix-container { text-align: center; }
  .matrix {
    display: inline-block; border: 3px solid var(--dark); border-radius: 10px; background: white;
    /* allow hover scale to extend beyond border */
    overflow: visible;
  }
  .matrix-row { display: flex; }
  .cell {
    width: 50px; height: 50px; border: 1px solid var(--border);
    display: flex; align-items: center; justify-content: center; font-weight: 600; position: relative; transition: all 0.3s ease;
  }
  .cell:hover { transform: scale(1.1); z-index: 10; }
  .header-cell { background: var(--dark); color: white; font-weight: 700; }
  .row-label { background: var(--dark); color: white; }

  /* Clustering highlights (generic) */
  .highlight-row {
    background: rgba(220, 38, 38, 0.2);
    border: 2px solid var(--danger);
    box-shadow: 0 0 10px rgba(220, 38, 38, 0.3);
  }
  .highlight-col {
    background: rgba(8, 145, 178, 0.2);
    border: 2px dashed var(--info);
    box-shadow: 0 0 10px rgba(8, 145, 178, 0.3);
  }
  .highlight-bicluster {
    background: rgba(5, 150, 105, 0.25);
    border: 2px solid var(--success);
    box-shadow: 0 0 10px rgba(5, 150, 105, 0.3);
    font-weight: 700;
  }
  .highlight-overlap {
    background: rgba(124, 58, 237, 0.3);
    border: 3px solid var(--secondary);
    box-shadow: 0 0 15px rgba(124, 58, 237, 0.4);
    font-weight: 700;
  }

  /* Numbered biclusters (for overlap mode) */
  .highlight-bicluster1{
    background: rgba(37, 99, 235, 0.18);   /* blue */
    border: 2px solid #2563eb;
    box-shadow: 0 0 8px rgba(37,99,235,.25);
  }
  .highlight-bicluster2{
    background: rgba(217, 119, 6, 0.20);   /* orange */
    border: 2px solid #d97706;
    box-shadow: 0 0 8px rgba(217,119,6,.25);
  }
  .highlight-bicluster3{
    background: rgba(5, 150, 105, 0.20);   /* green */
    border: 2px solid #059669;
    box-shadow: 0 0 8px rgba(5,150,105,.25);
  }

  .multi-member::after {
    content: "‚òÖ";
    position: absolute; top: -5px; right: -5px; background: var(--secondary); color: white;
    width: 16px; height: 16px; border-radius: 50%;
    display: flex; align-items: center; justify-content: center; font-size: 10px; border: 2px solid white;
  }

  .legend { background: var(--light); border-radius: 8px; padding: 15px; }
  .legend h4 { margin: 0 0 10px 0; color: var(--dark); }
  .legend-items { display: flex; flex-direction: column; gap: 8px; }
  .legend-item { display: flex; align-items: center; gap: 10px; font-size: 0.95rem; }
  .legend-swatch { width: 20px; height: 20px; border-radius: 4px; border: 2px solid transparent; }
  .swatch-row { background: rgba(220, 38, 38, 0.2); border-color: var(--danger); }
  .swatch-col { background: rgba(8, 145, 178, 0.2); border-color: var(--info); border-style: dashed; }
  .swatch-bi { background: rgba(5, 150, 105, 0.25); border-color: var(--success); }
  .swatch-overlap { background: rgba(124, 58, 237, 0.3); border-color: var(--secondary); }

  /* Extra legend for numbered biclusters */
  .legend-grid {
    display: grid; grid-template-columns: repeat(3, minmax(0,1fr)); gap: 8px; margin-top: 10px;
  }
  .swatch-bi1 { background: rgba(37,99,235,0.18); border-color:#2563eb; }
  .swatch-bi2 { background: rgba(217,119,6,0.20); border-color:#d97706; }
  .swatch-bi3 { background: rgba(5,150,105,0.20); border-color:#059669; }

  .explanation-panel {
    background: white; border: 2px solid var(--border); border-radius: 12px; padding: 25px; margin-bottom: 25px; min-height: 200px;
  }
  .explanation-title { font-size: 1.4rem; font-weight: 700; margin: 0 0 15px 0; color: var(--primary); }
  .explanation-content { font-size: 1.05rem; line-height: 1.7; }
  .explanation-content ul { margin: 10px 0; padding-left: 20px; }
  .explanation-content li { margin: 5px 0; }

  .stats-grid {
    display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 15px; margin-top: 20px;
  }
  .stat-card { background: white; border: 2px solid var(--border); border-radius: 8px; padding: 15px; text-align: center; }
  .stat-value { font-size: 2rem; font-weight: 700; color: var(--secondary); margin-bottom: 5px; }
  .stat-label { color: var(--dark); font-size: 0.9rem; font-weight: 600; }

  .insights-section { background: var(--light); border-radius: 12px; padding: 20px; }
  .insights-title { font-size: 1.3rem; font-weight: 600; margin: 0 0 15px 0; color: var(--dark); }

  @media (max-width: 768px) {
    .data-explanation { grid-template-columns: 1fr; }
    .visualization-section { grid-template-columns: 1fr; }
    .cell { width: 40px; height: 40px; font-size: 0.9rem; }
    .mode-buttons { grid-template-columns: 1fr; }
  }
</style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>üéØ Advanced Clustering Analysis</h1>
      <p>Retail Customer-Product Purchase Matrix ‚Ä¢ Multiple Clustering Perspectives</p>
    </div>

    <div class="main-content">
      <!-- Context and Data Explanation -->
      <div class="context-section">
        <h3>üìä Understanding the Data</h3>
        <p>This matrix represents <strong>purchase intensity</strong> between 6 customers (U1-U6) and 6 products (P1-P6). Higher numbers indicate stronger customer-product relationships through purchase frequency, spending amount, or engagement scores.</p>
      </div>

      <div class="data-explanation">
        <div class="explanation-card">
          <h4>üõçÔ∏è Customer Segments</h4>
          <p><strong>U1-U2:</strong> Premium shoppers (high P3-P4 values)<br>
          <strong>U3-U4:</strong> Value seekers (strong P5-P6 affinity)<br>
          <strong>U5-U6:</strong> Mixed behavior (diverse preferences)</p>
        </div>
        <div class="explanation-card">
          <h4>üì¶ Product Categories</h4>
          <p><strong>P1-P2:</strong> Basic items (low engagement)<br>
          <strong>P3-P4:</strong> Premium products (high-value)<br>
          <strong>P5-P6:</strong> Popular items (broad appeal)</p>
        </div>
      </div>

      <!-- Controls -->
      <div class="controls-section">
        <h3 class="controls-title">üîç Clustering Mode Selection</h3>
        <div class="mode-buttons">
          <button class="mode-btn" data-mode="row"><div>üéØ Row Clustering</div><small>Customer Segments</small></button>
          <button class="mode-btn" data-mode="col"><div>üìã Column Clustering</div><small>Product Categories</small></button>
          <button class="mode-btn" data-mode="bicluster"><div>üé™ Single Bicluster</div><small>Local Niche</small></button>
          <button class="mode-btn active" data-mode="overlap"><div>üåê Overlapping Biclusters</div><small>Multiple Niches</small></button>
        </div>
        <button class="reset-btn" id="resetBtn">üîÑ Reset View</button>
      </div>

      <!-- Visualization -->
      <div class="visualization-section">
        <div class="matrix-container">
          <div class="matrix" id="matrix"></div>
        </div>

        <div class="legend">
          <h4>üé® Visual Legend</h4>
          <div class="legend-items">
            <div class="legend-item"><span class="legend-swatch swatch-row"></span><span>Row Clusters (Customer Segments)</span></div>
            <div class="legend-item"><span class="legend-swatch swatch-col"></span><span>Column Clusters (Product Categories)</span></div>
            <div class="legend-item"><span class="legend-swatch swatch-bi"></span><span>Bicluster (Local Customer-Product Niche)</span></div>
            <div class="legend-item"><span class="legend-swatch swatch-overlap"></span><span>Overlapping Regions (‚òÖ = Multi-membership)</span></div>
          </div>
          <div class="legend-grid">
            <div class="legend-item"><span class="legend-swatch swatch-bi1"></span><span>Bicluster 1: U1‚ÄìU2 √ó P1‚ÄìP3</span></div>
            <div class="legend-item"><span class="legend-swatch swatch-bi2"></span><span>Bicluster 2: U2‚ÄìU4 √ó P3‚ÄìP4</span></div>
            <div class="legend-item"><span class="legend-swatch swatch-bi3"></span><span>Bicluster 3: U4‚ÄìU6 √ó P4‚ÄìP6</span></div>
          </div>
        </div>
      </div>

      <!-- Dynamic Explanation Panel -->
      <div class="explanation-panel">
        <div class="explanation-title" id="explanationTitle">üåê Overlapping Biclusters Analysis</div>
        <div class="explanation-content" id="explanationContent">
          <p>This advanced clustering mode reveals <strong>multiple overlapping customer-product niches</strong> that traditional clustering might miss. Notice how some customers and products participate in multiple clusters simultaneously.</p>
          <ul>
            <li><strong>Bicluster 1:</strong> Premium Early Adopters (U1-U2 √ó P1-P3)</li>
            <li><strong>Bicluster 2:</strong> Cross-Category Buyers (U2-U4 √ó P3-P4)</li>
            <li><strong>Bicluster 3:</strong> High-Value Segment (U4-U6 √ó P4-P6)</li>
          </ul>
          <p><strong>Business Impact:</strong> Overlapping patterns indicate customers with diverse needs who could be targeted with bundled offers or cross-selling strategies.</p>
        </div>
      </div>

      <!-- Statistics -->
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-value" id="totalCells">‚Äî</div>
          <div class="stat-label">Bicluster Cells</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="overlapCells">‚Äî</div>
          <div class="stat-label">Overlapping Cells</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="overlapPercent">‚Äî</div>
          <div class="stat-label">Overlap Percentage</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="activeClusters">‚Äî</div>
          <div class="stat-label">Active Clusters</div>
        </div>
      </div>

      <!-- Business Insights -->
      <div class="insights-section">
        <h3 class="insights-title">üí° Key Business Insights</h3>
        <div id="businessInsights">
          <p><strong>Multi-Segment Customers:</strong> Customers U2 and U4 show complex behavior patterns, belonging to multiple clusters. These are high-value customers with diverse needs.</p>
          <p><strong>Product Positioning:</strong> Products P3 and P4 serve as bridges between customer segments, suggesting strong cross-selling potential.</p>
          <p><strong>Strategic Opportunities:</strong> The overlapping regions represent untapped opportunities for bundled offerings and personalized marketing campaigns.</p>
        </div>
      </div>
    </div>
  </div>

<script>
(function() {
  // Data setup
  const customers = ['U1', 'U2', 'U3', 'U4', 'U5', 'U6'];
  const products = ['P1', 'P2', 'P3', 'P4', 'P5', 'P6'];
  const purchaseData = [
    [2, 3, 7, 8, 3, 2],
    [3, 2, 6, 8, 3, 3],
    [1, 1, 3, 4, 9, 8],
    [1, 2, 2, 3, 8, 9],
    [2, 2, 3, 3, 8, 8],
    [4, 4, 2, 2, 7, 7]
  ];

  // DOM elements
  const matrix = document.getElementById('matrix');
  const modeButtons = document.querySelectorAll('.mode-btn');
  const resetBtn = document.getElementById('resetBtn');
  const explanationTitle = document.getElementById('explanationTitle');
  const explanationContent = document.getElementById('explanationContent');
  const businessInsights = document.getElementById('businessInsights');

  // Build matrix
  function buildMatrix() {
    matrix.innerHTML = '';

    // Header row
    const headerRow = document.createElement('div');
    headerRow.className = 'matrix-row';

    const emptyCell = document.createElement('div');
    emptyCell.className = 'cell header-cell';
    headerRow.appendChild(emptyCell);

    products.forEach(product => {
      const cell = document.createElement('div');
      cell.className = 'cell header-cell';
      cell.textContent = product;
      headerRow.appendChild(cell);
    });
    matrix.appendChild(headerRow);

    // Data rows
    customers.forEach((customer, rowIndex) => {
      const row = document.createElement('div');
      row.className = 'matrix-row';

      const labelCell = document.createElement('div');
      labelCell.className = 'cell row-label';
      labelCell.textContent = customer;
      row.appendChild(labelCell);

      products.forEach((product, colIndex) => {
        const cell = document.createElement('div');
        cell.className = 'cell';
        cell.textContent = purchaseData[rowIndex][colIndex];
        cell.dataset.row = rowIndex;
        cell.dataset.col = colIndex;
        row.appendChild(cell);
      });

      matrix.appendChild(row);
    });
  }

  // Clear all highlights (now includes numbered biclusters)
  function clearHighlights() {
    matrix.querySelectorAll('.cell').forEach(cell => {
      cell.classList.remove(
        'highlight-row','highlight-col','highlight-bicluster','highlight-overlap','multi-member',
        'highlight-bicluster1','highlight-bicluster2','highlight-bicluster3'
      );
    });
  }

  // Count stats accurately across all bicluster classes
  function updateStats() {
    const allDataCells = Array.from(matrix.querySelectorAll('.cell[data-row][data-col]'));

    const inAny = allDataCells.filter(c =>
      c.classList.contains('highlight-bicluster') ||
      c.classList.contains('highlight-bicluster1') ||
      c.classList.contains('highlight-bicluster2') ||
      c.classList.contains('highlight-bicluster3') ||
      c.classList.contains('highlight-overlap')
    );

    const uniq = new Set(inAny.map(c => `${c.dataset.row}-${c.dataset.col}`));
    const overlaps = matrix.querySelectorAll('.highlight-overlap').length;

    document.getElementById('totalCells').textContent = uniq.size || 0;
    document.getElementById('overlapCells').textContent = overlaps;
    document.getElementById('overlapPercent').textContent =
      uniq.size ? Math.round((overlaps / uniq.size) * 100) + '%' : '0%';
    document.getElementById('activeClusters').textContent = getCurrentClusters();
  }

  function getCurrentClusters() {
    const activeMode = document.querySelector('.mode-btn.active')?.dataset.mode;
    switch(activeMode) {
      case 'row': return 1;
      case 'col': return 1;
      case 'bicluster': return 1;
      case 'overlap': return 3;
      default: return 0;
    }
  }

  // Clustering explanations (unchanged content)
  const explanations = {
    row: {
      title: 'üéØ Row Clustering: Customer Segment Analysis',
      content: `
        <p>This mode identifies <strong>similar customers</strong> based on their overall purchasing patterns across all products. We're highlighting customers U1 and U2 who show similar behavior.</p>
        <ul>
          <li><strong>Segment Characteristics:</strong> U1 and U2 both show high engagement with premium products (P3-P4)</li>
          <li><strong>Similarity Metrics:</strong> Based on correlation or distance measures across all product interactions</li>
          <li><strong>Business Application:</strong> Create targeted marketing campaigns for this premium customer segment</li>
          <li><strong>Limitation:</strong> Ignores product relationships and local patterns within specific product categories</li>
        </ul>
        <p><strong>When to use:</strong> Customer segmentation, personalization strategies, and loyalty program design.</p>
      `,
      insights: `
        <p><strong>Segment Profile:</strong> Premium customers with higher disposable income and brand loyalty.</p>
        <p><strong>Marketing Strategy:</strong> Focus on premium product launches and exclusive offers.</p>
        <p><strong>Revenue Impact:</strong> This segment likely represents 40% of total revenue despite being 33% of customers.</p>
      `
    },
    col: {
      title: 'üìã Column Clustering: Product Category Analysis',
      content: `
        <p>This approach groups <strong>similar products</strong> based on customer purchasing patterns. Products P3 and P4 are highlighted as they attract similar customer segments.</p>
        <ul>
          <li><strong>Category Definition:</strong> P3 and P4 form a premium product category with similar customer appeal</li>
          <li><strong>Cross-Product Insights:</strong> Customers who buy P3 are likely to also purchase P4</li>
          <li><strong>Inventory Strategy:</strong> These products should be stocked and promoted together</li>
          <li><strong>Pricing Strategy:</strong> Similar pricing strategies and discount patterns should apply</li>
        </ul>
        <p><strong>When to use:</strong> Product categorization, inventory management, and cross-selling optimization.</p>
      `,
      insights: `
        <p><strong>Category Strength:</strong> Strong correlation between P3 and P4 purchases suggests complementary products.</p>
        <p><strong>Bundle Opportunity:</strong> Create product bundles combining P3 and P4 for increased AOV.</p>
        <p><strong>Supply Chain:</strong> Coordinate procurement and storage for these related products.</p>
      `
    },
    bicluster: {
      title: 'üé™ Single Bicluster: Local Market Niche',
      content: `
        <p>Biclustering identifies <strong>specific customer-product combinations</strong> with strong mutual affinity. This shows a local niche where certain customers (U1-U3) have particularly strong relationships with specific products (P3-P4).</p>
        <ul>
          <li><strong>Local Pattern:</strong> High-value interactions within a specific customer-product subset</li>
          <li><strong>Mutual Selection:</strong> Both customers prefer these products AND these products appeal to these customers</li>
          <li><strong>Market Niche:</strong> Represents a focused market opportunity with high engagement</li>
          <li><strong>Optimization Target:</strong> Most efficient place to focus marketing and inventory resources</li>
        </ul>
        <p><strong>When to use:</strong> Niche market identification, focused marketing campaigns, and resource allocation.</p>
      `,
      insights: `
        <p><strong>Niche Value:</strong> This bicluster represents the highest per-customer-per-product engagement in the matrix.</p>
        <p><strong>Growth Strategy:</strong> Expand this niche by finding similar customers or complementary products.</p>
        <p><strong>Competitive Advantage:</strong> Focus resources on defending and growing this high-value niche.</p>
      `
    },
    overlap: {
      title: 'üåê Overlapping Biclusters: Complex Market Dynamics',
      content: `
        <p>The most sophisticated analysis reveals <strong>multiple overlapping niches</strong> where customers and products participate in several market segments simultaneously. This captures the complexity of real-world retail behavior.</p>
        <ul>
          <li><strong>Bicluster 1 (U1-U2 √ó P1-P3):</strong> Early adopters exploring new products</li>
          <li><strong>Bicluster 2 (U2-U4 √ó P3-P4):</strong> Premium segment cross-category buyers</li>
          <li><strong>Bicluster 3 (U4-U6 √ó P4-P6):</strong> High-volume, diverse preference shoppers</li>
          <li><strong>Overlap Zones:</strong> Customers/products belonging to multiple segments (marked with ‚òÖ)</li>
        </ul>
        <p><strong>Advanced Insights:</strong> U2 and U4 are "bridge customers" connecting different market segments, while P3 and P4 serve multiple customer types.</p>
      `,
      insights: `
        <p><strong>Multi-Segment Customers:</strong> U2 and U4 show complex behavior patterns, belonging to multiple clusters. These are high-value customers with diverse needs.</p>
        <p><strong>Bridge Products:</strong> P3 and P4 serve as connectors between customer segments, suggesting strong cross-selling potential.</p>
        <p><strong>Strategic Opportunities:</strong> Overlapping regions represent opportunities for bundled offerings and sophisticated personalization.</p>
      `
    }
  };

  // Apply clustering mode
  function applyMode(mode) {
    clearHighlights();

    // Update active button
    modeButtons.forEach(btn => btn.classList.remove('active'));
    document.querySelector(`[data-mode="${mode}"]`).classList.add('active');

    // Update explanation
    const explanation = explanations[mode];
    explanationTitle.textContent = explanation.title;
    explanationContent.innerHTML = explanation.content;
    businessInsights.innerHTML = explanation.insights;

    // Apply highlights
    switch(mode) {
      case 'row':
        // Highlight U1 and U2 (rows 0-1)
        for(let col = 0; col < products.length; col++) {
          for(let row = 0; row < 2; row++) {
            const cell = matrix.querySelector(`[data-row="${row}"][data-col="${col}"]`);
            if(cell) cell.classList.add('highlight-row');
          }
        }
        break;

      case 'col':
        // Highlight P3 and P4 (columns 2-3)
        for(let row = 0; row < customers.length; row++) {
          for(let col = 2; col < 4; col++) {
            const cell = matrix.querySelector(`[data-row="${row}"][data-col="${col}"]`);
            if(cell) cell.classList.add('highlight-col');
          }
        }
        break;

      case 'bicluster':
        // Single bicluster: U1-U3 √ó P3-P4
        for(let row = 0; row < 3; row++) {
          for(let col = 2; col < 4; col++) {
            const cell = matrix.querySelector(`[data-row="${row}"][data-col="${col}"]`);
            if(cell) cell.classList.add('highlight-bicluster');
          }
        }
        break;

      case 'overlap':
        // Bicluster 1: U1-U2 √ó P1-P3
        for(let row = 0; row < 2; row++) {
          for(let col = 0; col < 3; col++) {
            const cell = matrix.querySelector(`[data-row="${row}"][data-col="${col}"]`);
            if(cell) cell.classList.add('highlight-bicluster1','highlight-bicluster');
          }
        }
        // Bicluster 2: U2-U4 √ó P3-P4
        for(let row = 1; row < 4; row++) {
          for(let col = 2; col < 4; col++) {
            const cell = matrix.querySelector(`[data-row="${row}"][data-col="${col}"]`);
            if(cell){
              if(cell.classList.contains('highlight-bicluster1')){
                cell.classList.add('highlight-overlap','multi-member');
              }else{
                cell.classList.add('highlight-bicluster2','highlight-bicluster');
              }
            }
          }
        }
        // Bicluster 3: U4-U6 √ó P4-P6
        for(let row = 3; row < 6; row++) {
          for(let col = 3; col < 6; col++) {
            const cell = matrix.querySelector(`[data-row="${row}"][data-col="${col}"]`);
            if(cell){
              if(cell.classList.contains('highlight-bicluster2')){
                cell.classList.add('highlight-overlap','multi-member');
              }else{
                cell.classList.add('highlight-bicluster3','highlight-bicluster');
              }
            }
          }
        }
        break;
    }

    updateStats();
  }

  // Event listeners
  modeButtons.forEach(btn => {
    btn.addEventListener('click', () => applyMode(btn.dataset.mode));
  });

  resetBtn.addEventListener('click', () => {
    clearHighlights();
    modeButtons.forEach(btn => btn.classList.remove('active'));
    explanationTitle.textContent = 'üîç Select a Clustering Mode';
    explanationContent.innerHTML = '<p>Choose one of the clustering modes above to see how different analytical approaches reveal various patterns in the customer-product purchase matrix.</p>';
    businessInsights.innerHTML = '<p>Business insights will appear here based on your selected clustering mode.</p>';
    updateStats();
  });

  // Initialize
  buildMatrix();
  applyMode('overlap'); // Start with overlap mode
})();
</script>
</body>
</html>
